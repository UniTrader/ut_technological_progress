<?xml version="1.0" encoding="UTF-8"?>
<mdscript xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="UT_Technological_Progress_Test" xsi:noNamespaceSchemaLocation="http://utnas/~unitrader/XRebirthxsds/md.xsd">
  <cues>
    <cue name="Init">
      <actions>
        <create_group groupname="$Testships"/>
      </actions>
      <cues>
        <cue name="SpawnTestShips" checktime="10s" checkinterval="5s">
          <conditions>
            <cue_is_complete cue="md.Setup.Start"/>
          </conditions>
          <actions>
        <do_all exact="100" counter="$i">
          <generate_loadout result="$loadout" macro="macro.ship_arg_xl_carrier_01_b_macro" macros="[macro.{'ut_tech_gen_turret_arg_m_gatling_T' + ( if $i gt 99 then '' else if $i gt 9 then '0' else '00' ) + $i + '_macro'}]" repeat="true"/>
          <debug_text filter="general" text="$loadout"/>
          <debug_text filter="general" text="$loadout.wares.list"/>
          <create_ship name="$Testship" zone="player.zone" macro="macro.ship_arg_xl_carrier_01_b_macro">
            <owner exact="faction.player"/>
            <pilot macro="character_boron_generic_01_macro">
              <owner exact=" faction.player"/>
              <skills>
                <skill type="boarding" exact="15"/>
                <skill type="engineering" exact="15"/>
                <skill type="management" exact="15"/>
                <skill type="morale" exact="15"/>
              </skills>
            </pilot>
            <loadout loadout="$loadout">
              <level exact="1"/>
            </loadout>
            <safepos object="player.container" radius="5km"/>
          </create_ship>
          <set_object_name object="$Testship" name="'TEST ' + $i"/>
        </do_all>
          </actions>
        </cue>
        <cue name="ChangeTestShips1" instantiate="true">
          <conditions>
            <event_player_activated_weapongroup weapongroup="1"/>
          </conditions>
          <actions>
            <create_loadout result="$loadout">
              <macros>
                <engine macro="engine_arg_xl_travel_01_mk1_macro" path="../con_engine_01"/>
                <engine macro="engine_arg_xl_travel_01_mk1_macro"/>
                <!--weapon macro="weapon_gen_s_gatling_01_mk2_macro" path="../con_primaryweapon_01" optional="1"/>
                      <weapon macro="weapon_gen_s_gatling_01_mk2_macro" path="../con_primaryweapon_02" optional="1"/>
                      <shield macro="shield_arg_s_standard_01_mk2_macro" path="../con_shield_01" optional="1"/>
                    </macros>
                    <virtualmacros>
                      <thruster macro="thruster_gen_s_allround_01_mk3_macro"/>
                    </virtualmacros-->
              </macros>
            </create_loadout>
            <debug_text filter="general" text="$loadout"/>
            <apply_loadout object="$Testship" loadout="$loadout"/>
          </actions>
        </cue>
        <cue name="ChangeTestShips2" instantiate="true">
          <conditions>
            <event_player_activated_weapongroup weapongroup="2"/>
          </conditions>
          <actions>
            <create_loadout result="$loadout">
              <macros>
                <engine macro="engine_par_xl_travel_01_mk1_macro" path="../con_engine_01"/>
                <engine macro="engine_par_xl_travel_01_mk1_macro" path="../con_engine_02"/>
                <!--weapon macro="weapon_gen_s_gatling_01_mk2_macro" path="../con_primaryweapon_01" optional="1"/>
                      <weapon macro="weapon_gen_s_gatling_01_mk2_macro" path="../con_primaryweapon_02" optional="1"/>
                      <shield macro="shield_arg_s_standard_01_mk2_macro" path="../con_shield_01" optional="1"/>
                    </macros>
                    <virtualmacros>
                      <thruster macro="thruster_gen_s_allround_01_mk3_macro"/>
                    </virtualmacros-->
              </macros>
            </create_loadout>
            <debug_text filter="general" text="$loadout"/>
            <apply_loadout object="$Testship" loadout="$loadout"/>
          </actions>
        </cue>
        <cue name="ChangeTestShips3" instantiate="true">
          <conditions>
            <event_player_activated_weapongroup weapongroup="3"/>
          </conditions>
          <actions>
            <create_loadout result="$loadout">
              <macros>
                <engine macro="engine_tel_xl_travel_01_mk1_macro" path="../con_engine_01"/>
                <engine macro="engine_tel_xl_travel_01_mk1_macro" path="../con_engine_02"/>
                <!--weapon macro="weapon_gen_s_gatling_01_mk2_macro" path="../con_primaryweapon_01" optional="1"/>
                      <weapon macro="weapon_gen_s_gatling_01_mk2_macro" path="../con_primaryweapon_02" optional="1"/>
                      <shield macro="shield_arg_s_standard_01_mk2_macro" path="../con_shield_01" optional="1"/>
                    </macros>
                    <virtualmacros>
                      <thruster macro="thruster_gen_s_allround_01_mk3_macro"/>
                    </virtualmacros-->
              </macros>
            </create_loadout>
            <debug_text filter="general" text="$loadout"/>
            <apply_loadout object="$Testship" loadout="$loadout"/>
          </actions>
        </cue>
      </cues>
    </cue>
  </cues>
</mdscript>
